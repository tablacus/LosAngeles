・L-os Angeles外部コマンド

●LNDRV		シンボリックリンクドライバ

●書式

 LNDRV		で常駐

 LNDRV -R	で常駐解除

●解説

　常駐すると#KILLの内部と#SOPEN,#NOPENをフックしてシンボリックリンクを実現しま

す。

　沖 勝さんの作られたHuman68kのlndrvとほぼ同様のシンボリックリンクドライバです

　循環リンクに陥った場合は【ESC】キーでリンクを中止できます。


●注意

　未使用フラグを勝手に使用しているため、将来に渡る動作保証はできません。

　使用するツールによっては現段階で異常が発生する可能性があります。十分覚悟の上

お使い下さるようお願いします。

LAの内部コマンドのKや#KILLではリンクを削除します。

しかし、LAの内部コマンドのNや#NAMEではリンクの名前を変更できません。

(リンク先のファイルの名前を変更します。)

　Human68kでシンボリックリンクに対応しているファイルコマンドを使用するか、常駐

を解除またはATTRIBで属性を解除してから実行して下さい。


lndrv に関する資料 by Masaru Oki

・リンクファイルと通常ファイルとの区別
	CHMOD() などで得られる atr の第6ビットで区別します。
	第6ビットが0であれば通常のファイルです。
	第6ビットが0であればリンクファイルです。
	CHMOD(filename, -1) を使って判断できます。FILES を使用し
	てもリンクが指している実体の属性しか得られないので判断
	できません。ご注意下さい。

・リンクファイルの中身
	単にリンク先のファイル名が文字列として入っているだけです。
	ln file linkname としたときの file そのものです。
	dir などでリンクファイルのサイズを見ていただければ納得い
	くと思います。

・LA版のリンク展開の仕組み

　LAのサブルーチンコールのうち、#SOPEN,#NOPENのベクタを乗っ取って、そこでリ

ンク展開を行なったのちに通常のベクタに処理を渡します。

　リンク展開は、パスで区切られた名称のひとつひとつに対して行なわれます。

　#SOPENX,#NOPENXではリンク展開されませんが、#ROPEN,#WOPEN等のコールは内部で

#SOPENをコールしている為、リンク展開されます。


　このファイルは沖　勝さんのlndrv.docやln_tech.docから多くの部分を抜粋して作成

されています。


●History

1.00	1995. 2. 3	新規作成

