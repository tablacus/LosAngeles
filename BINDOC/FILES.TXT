★FILES.ASM		マルチ・ファイル・ライブラリ


☆解説

　FILES.ASMはLAで2つのファイルを同時にオープンできるようにするOHM-Z80のライブラリです。

○使い方

　OHM-Z80のソースリストで以下のようにインクルードして使って下さい。

	ORG	????			;プログラムの開始番地は指定しておく
	$INCLUDE	LA.DEF		;LA.DEFをインクルードしておく
_FILESW	EQU	????			;ワークエリアの先頭番地を定義しておく
	$INCLUDE	FILES.ASM	;マルチファイルライブラリのインクルード

★各機能の説明

サブルーチン

_FILESI		_CHGFILE	_NROPEN		_FILESR

ワークエリア

_FILESW		_FILESD


_FILESI

　イニシャル。このライブラリを使用する場合必ず呼ぶ必ずコールしなければならない。


_CHGFILE

　アクセスするファイルの番号(0-1)をAレジスタにセットしてコールする。


_NROPEN

　ディレクトリ・キャシュの付いた#NROPEN


_FILESR

　リリース。このライブラリを使用した後に必ずコールしなければならない。


_FILESW

　このライブラリで使用するワークエリアの先頭番地。ワークエリアのサイズは$1894バイト

ライブラリの外で設定しておく必要がある。


_FILESD

　ファイルデータのワークエリア。1つのファイルに付、70バイトある。


※注意

　2つのファイルを同時に同じデバイスに書き込むことができません。2つとも書き込みとして

使用することがある場合には使わないで下さい。


FILES.ASM

0.50	1995. 5.20	新規作成

