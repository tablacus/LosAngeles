-	-	-	-	-	-	-	-	-	-

	LAのワークエリア一覧表

	S-OS互換ワークエリア

-	-	-	-	-	-	-	-	-	-


<シンボル名>		<アドレス>	<サイズ>

#USR		$1F7E	2バイト

	LAをコールドスタートしたあとジャンプするアドレス


#DVSW		$1F7D	1バイト

		カレントドライブ(デフォルトデバイス)のドライブ名

		(S-OSと仕様が違うが#DVSWはS-OSでも直接アクセスしては
		  いけない仕様になっている)


#LPSW		$1F7C	1バイト

	Reserved　Future

	(#PRINT等での出力をプリンタに出力するかどうかのフラグ)


#PRCNT		$1F7A	2バイト

	Reserved　Future

	(改行してから表示した文字数を格納したアドレスを示している)


#XYADR		$1F78	2バイト

	カーソル座標が格納されているアドレスを示している


#KBFAD		$1F76	2バイト

	キー入力(#GETL)用のバッファアドレスを示している


#IBFAD		$1F74	2バイト

		LAバイナリアトリビュートのアドレス

		書き込みオープン時、ビット0が1の時はLAバイナリ形式

		同時にインフォメーションブロックの先頭アドレス-1

		(#IBFAD)+1からディレクトリエントリと同様の32バイトのインフォ

		メーションブロックとなる

			<オフセット>
			+0		バイナリアトリビュート
	インフォメーションブロック	+1~+8	ファイル名(プライマリ名)
			+9~+11	拡張子
			+12		属性
			+13~+16	開始番地(アスキー形式で格納)
			+17		LAバイナリID
			+18~+21	実行番地(アスキー形式で格納)
			+22		0
			+23~+24	ファイル作成時刻
			+25~+26	ファイル作成日
			+27~+28	ファイルの先頭クラスタ
			+29~+32	ファイルのサイズ

#SIZE		$1F72	2バイト

	ファイルサイズ下位16ビット、上位16ビットは#SIZEHに格納されて

	いる。


#DTADR		$1F70	2バイト

	ファイルの先頭アドレス


#EXADR		$1F6E	2バイト

	ファイルのエントリ(実行)アドレス


#STKAD		$1F6C	2バイト

	スタックアドレス


#MEMAX		$1F6A	2バイト

	LAのアプリケーションが使用出来るメモリの上限


#WKSIZ		$1F68	2バイト

	特殊ワークエリアのサイズ


#DIRNO		$1F67	1バイト

	LAでは使用していない


#MXTRK		$1F66	1バイト

	使用しているフロッピーディスクの最大シリンダ数


#DTBUF		$1F64	2バイト

	デバイスのデータを読み書きする先頭アドレスが入っている。データバッファ

	のサイズは1024バイト


#FATBF		$1F62	2バイト

	FATを読み書きする先頭アドレスが入っている。

	FATバッファのサイズは標準で2048バイト、

	常駐プログラムDBEXを常駐させると3072バイト


#DIRPS		$1F60	2バイト

	使用しているデバイスのディレクトリが入っている先頭レコード


#FATPS		$1F5E	2バイト

	使用しているデバイスのファイルアロケーションテーブル(FAT)が入って

	いる先頭レコード


#DSK		$1F5D	1バイト

	アクセスしようとするドライブ名が入る(書き換えは#CHGDRVを使うこと)


#WIDTH		$1F5C	1バイト

	現在のスクリーンモード(桁数)


#MAXLN		$1F5B	1バイト

	画面に表示できる最大行数


-	-	-	-	-	-	-	-	-	-

	L-os　Angeles

	LAオリジナルワークエリア

-	-	-	-	-	-	-	-	-	-


<シンボル名>		<アドレス>	<サイズ>

#CYL0		$1F00	1バイト

	フロッピーディスクのドライブ0の現在のシリンダの位置

	不明の場合は$FF


#CYL1		$1F01	1バイト

	フロッピーディスクのドライブ1の現在のシリンダの位置

	不明の場合は$FF


#CYL2		$1F02	1バイト

	フロッピーディスクのドライブ2の現在のシリンダの位置

	不明の場合は$FF


#CYL3		$1F03	1バイト

	フロッピーディスクのドライブ3の現在のシリンダの位置

	不明の場合は$FF


#DRIVE		$1F04	1バイト

	ユニット番号

	(X1ではフロッピーの場合はフロッピーディスクドライブのドライブセレク

	トとヘッドセレクトのポート($0FFC)の値としても使用している)


#WK1FD0		$1F05	1バイト

	画面制御ポート($1FD0)の値


#SIZEH		$1F06	2バイト

	ファイルサイズの上位16ビット

	(#WOPENでは従来のソフトとの互換の為に#SIZEHに0を書き込む)


#MSEC		$1F08	1バイト

	フロッピーディスクのセクタの数


#ISEC		$1F09	1バイト

	v1.32からは使用していない

	フロッピーディスクの物理セクタのサイズ

	(1セクタ1024=$04、512=$02)


#SECADD		$1F0A	2バイト

	フロッピーディスクのセクタの最小値を書いてあるアドレス


#CLPS		$1F0C	2バイト

	アクセスするクラスタの位置


#GCAD		$1F0E	2バイト

	#FGETCで使用するポインタ


#GCLN		$1F10	2バイト

	#FGETCで使用するサイズ


#GCEH		$1F12	1バイト

	#FGETCで使用する終了アドレスの上位8ビット-1の値


#CLLN		$1F13	1バイト

	#FGETCで使用するバッファのクラスタ単位の長さ


#FBPS		$1F14	2バイト

	アクセスしているファイルのディレクトリエントリのあるクラスタ番号

	ルートディレクトリの場合はレコード番号


#FBAD		$1F16	2バイト

	アクセスしているファイルのディレクトリエントリのあるアドレス


#FBCNT		$1F18	1バイト

	ディレクトリバッファのカウンタ


#WILD		$1F19	1バイト

	ワイルドカードを使用しているかどうかのフラグ

	0なら使用していない、0以外なら使用している


#FILEN		$1F1A	1バイト

	マッチしたファイルの数


#DIRF		$1F1B	1バイト

	ディレクトリフラグ

	ルートディレクトリの場合0,サブディレクトリの場合は0以外が入る


#NDIRP		$1F1C	2バイト

	現在アクセスしているディレクトリのクラスタ番号

	0ならルートディレクトリ


#DIRBF		$1F1E	2バイト

	ディレクトリバッファの先頭アドレスが入っている。サイズは1024バイト


#DRDA		$1F20	2バイト

	物理セクタが1024バイトのフロッピーディスクの

	1クラスタ読み込みルーチンのアドレス


#DWTA		$1F22	2バイト

	物理セクタが1024バイトのフロッピーディスクの

	1クラスタ書き込みルーチンのアドレス


#DRDWA		$1F24	2バイト

	物理セクタが512バイトのフロッピーディスクの

	1クラスタ読み込みルーチンのアドレス


#DWTWA		$1F26	2バイト

	物理セクタが512バイトのフロッピーディスクの

	1クラスタ書き込みルーチンのアドレス


#MOTOFFA	$1F28	2バイト

	フロッピーディスクの#MOTOFFルーチンのアドレス


#GNCLA		$1F2A	2バイト

	12ビットFATの#GNCLルーチンが入っているアドレス


#SNCLA		$1F2C	2バイト

	12ビットFATの#SNCLルーチンが入っているアドレス


#M2D		$1F2E	2バイト

	2D(360kB)のフロッピーディスクのDPB用のデータの先頭18バイ

	トが入っているアドレス


#M2HD		$1F30	2バイト

	2HD(1.2MB)のフロッピーディスクのDPB用のデータの先頭18バ

	イトが入っているアドレス


#FSEA		$1F32	2バイト

	ファイルサーチルーチンが入っているアドレス


#NSEA		$1F34	2バイト

	未使用ディレクトリサーチルーチンが入っているアドレス


#FATBF1		$1F36	2バイト

	FATバッファの位置の初期値


#MEMAX1		$1F38	2バイト

	#MEMAXの位置の初期値


#CONYS		$1F3A	2バイト

	コンソールY座標開始位置の入っているアドレス


#CONYE		$1F3C	2バイト

	コンソールY座標終了位置の入っているアドレス


#CONXS		$1F3E	2バイト

	コンソールX座標開始位置の入っているアドレス


#CONXE		$1F40	2バイト

	コンソールX座標終了位置の入っているアドレス


#COLORF		$1F42	2バイト

	カラーアトリビュートバッファの入っているアドレス


#MAXDRV		$1F44	1バイト

	LAで扱える最大のドライブ数。

	X1版の初期値は7(A:~G:)、MSX-DOS版の初期値は8(A:~H:)


#GCBUF		$1F45	1バイト

	#FGETCで使用するバッファの開始アドレス。


#KYBFX		$1F47	1バイト

	先行キー入力できる最大文字数


#SEEKSP		$1F48	1バイト

	フロッピーディスクのステップレート(0~3)


#LVER		$1F49	2バイト

	LAのバージョンをBCDで格納している。

